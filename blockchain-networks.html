<!doctype html>
<html id="baz" class="" lang="en">
  <head>
        <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

      <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
      <!--[if lt IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
      <![endif]-->

      <title>Blockchains from the ground up: Part 2 - John Mathews</title>
      <meta name="title" content="Blockchains from the ground up: Part 2 -  John Mathews "/>
      <meta name="author" content="John Mathews"/>
      <meta name="keywords" content=" Blockchains,Digital Currencies,Distributed Consensus,Distributed Ledger Technology,Sybil " />
      <meta name="description" content=" An overview of the essential features of a blockchain, using proof-of-work for consensus "/>

      <meta name="twitter:creator" content="@johnmathews"/>
      <meta name="twitter:domain" content="https://johnmathews.eu"/>
      <meta property="twitter:title" content="Blockchains from the ground up: Part 2"/>
      <meta name="twitter:description" content=" An overview of the essential features of a blockchain, using proof-of-work for consensus "/>
      <meta property="twitter:url" content="./blockchain-networks.html"/>
      <meta name="twitter:image" content="./
"/>
      <meta property="twitter:card" content="  summary  "/>

      <meta property="og:type" content=" article "/>
      <meta property="og:title" content="Blockchains from the ground up: Part 2"/>
      <meta property="og:description" content=" An overview of the essential features of a blockchain, using proof-of-work for consensus "/>
      <meta property="og:url" content="./blockchain-networks.html"/>
      <meta property="og:image" content="./
"/>

      <link rel="alternate" type="application/atom+xml" title="John Mathews - all articles" href="./None" />
      <link rel="alternate" type="application/atom+xml" title="John Mathews - technical articles" href="./feeds/technical.atom.xml" />
      <link rel="alternate" type="application/atom+xml" title="John Mathews - non-Technical articles" href="./feeds/non-technical.atom.xml" />
      <link rel="alternate" type="application/atom+xml" title="John Mathews - snippet articles" href="./feeds/snippet.atom.xml" />

      <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
      <link rel="preconnect" href="https://fonts.gstatic.com"/>
      <link async href="https://fonts.googleapis.com/css2?family=Cardo&display=swap" rel="stylesheet"/>
      <link async href="https://fonts.googleapis.com/css2?family=Anonymous+Pro&display=swap" rel="stylesheet"/>


      <link rel="icon" href="./extra/favicon.png" />

      <link href="./theme/css/styles.css" rel="stylesheet"/>
      <link id="PygmentCSS" href="./theme/css/pygment-light.css" rel="stylesheet" media="print" onload="this.media='all'" />

      <script>
        if (localStorage.getItem('theme') === 'dark') {
          document.getElementById('baz').classList.add('dark')
        }
      </script>

      <!-- Cloudflare Web Analytics -->
      <!-- End Cloudflare Web Analytics -->




  </head>

  <body class="dark:bg-gray-900">
    <a class="pt-20 mt-20" name="top"></a>
    <nav id="navbar" style="transition: top 0.3s ease-in-out;" class="md:fixed z-50 top-0 w-full flex flex-row justify-between pt-2 text-xl bg-white dark:bg-gray-900">
      <div class="text-bold pr-3 hidden md:flex md:flex-grow xl:hidden">
        <div class="mt-10 md:mt-0 flex-grow justify-between">
          <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1" href="./blog.html">Blog</a>
          <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1" href="./snippets.html">Snippets</a>
          <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1" href="./about.html">About</a>
          <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1" href="./portfolio.html">Portfolio</a>
          <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1" href="./experience.html">Experience</a>
          <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1" href="./book-notes.html">Books</a>
          <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1" href="./analytics.html">Analytics</a>
          <a id="searchButton2" class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1" href="javaScript:;">Search</a>
        </div>
        <div class="flex-none justify-end px-2 pt-2">
          <button class="inline-block theme-toggle" aria-label="themeToggle" id="modeSwitcher1">
            <div class="day modeIcon hidden">
              <i class="mb-2 pb-2 far fa-lightbulb fa-lg"></i>
            </div>
            <div class="night modeIcon">
              <i class="mb-2 pb-2 far fa-moon fa-lg"></i>
            </div>
          </button>
          <button class="catChooser hidden md:mt-0 ml-5 md:pl-0" aria-label="Category chooser">
            <i class="mb-2 pb-2 fas fa-paw fa-lg"></i>
          </button>
        </div>
      </div>
      <div class="flex-none md:hidden block md:inline-block">
        <button class="mx-2 my-1" id="hamburger" aria-label="Menu" >
          <div class="toggle"><i class="fas fa-bars fa-lg"></i></div>
          <div class="hidden toggle"><i class="fas fa-times fa-lg"></i></div>
        </button>
      </div>
    </nav>
      <div class="toggle hidden w-screen flex flex-col text-left mt-5">
        <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1 text-2xl" href="./blog.html">Blog</a>
        <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1 text-2xl" href="./snippets.html">Snippets</a>
        <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1 text-2xl" href="./about.html">About</a>
        <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1 text-2xl" href="./portfolio.html">Portfolio</a>
        <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1 text-2xl" href="./experience.html">Experience</a>
        <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1 text-2xl" href="./book-notes.html">Books</a>
        <a class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1 text-2xl" href="./analytics.html">Analytics</a>
        <a id="searchButton3" class="text-gray-700 dark:text-gray-200 hover:underline font-semibold px-3 py-1 text-2xl" href="javaScript:;">Search</a>
        <div class="px-3 pt-3 flex flex-row">
          <button class="mx-1 theme-toggle" aria-label="themeToggle" id="modeSwitcher3">
            <div class="day modeIcon">
              <i class="far fa-lightbulb fa-2x"></i>
            </div>
            <div class="night modeIcon hidden">
              <i class="far fa-moon fa-2x"></i>
            </div>
          </button>
          <button class="catChooser hidden ml-5" aria-label="Category chooser">
            <i class="fas fa-paw fa-2x"></i>
          </button>
        </div>
      </div>

    <main class="lg:mt-10 lg:pt-5 mx-3 lg:mx-auto lg:w-5/6">

      <div id="catModal" class="hidden fixed z-10 inset-0 overflow-y-auto">
        <div class="flex items-end justify-center text-center min-h-screen pb-80 px-4 md:block md:p-0">
          <div class="fixed inset-0 transition-opacity" aria-hidden="true">
            <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
          </div>
          <span class="hidden sm:inline-block sm:align-middle md:h-screen" aria-hidden="true">&#8203;</span>
          <div class="inline-block align-bottom bg-white border-4 border-gray-50 rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle" role="dialog" aria-modal="true" aria-labelledby="modal-headline">
            <div class="bg-gradient-to-t from-blue-300 to-yellow-300 px-5 py-5">
              <div class="text-center">
                <h3 class="text-2xl font-medium leading-8 md:leading-6 pb-2 text-gray-700" id="modal-headlinemd">
                  Which categories do you want to see?
                </h3>
                <hr class="border -ml-6 -mr-6 border-blue-500 border-4 mt-2 mb-4">
                <div id="" class="flex items-center flex-row space-x-4 justify-center text-base my-auto text-gray-700" role="group">
                  <button id="chooseBoth" class="text-xl py-1 px-2 py-0 mx-0 bg-none rounded-xl hover:text-gray-50 hover:bg-yellow-500 border-0 outline-none focus:shadow-outline">All</button>
                  <button id="chooseTechnical" class="text-xl py-1 px-2 bg-none rounded-xl hover:text-gray-50 hover:bg-yellow-500 outline-none focus:shadow-outline active:bg-red-500 ">Technical</button>
                  <button id="chooseNonTechnical" class="text-xl py-1 px-2 bg-none rounded-xl hover:text-gray-50 hover:bg-yellow-500 outline-none focus:shadow-outline">Non-Technical</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="keyboardShortcuts" class="hidden fixed z-10 inset-0 overflow-y-auto">
        <div class="flex items-end justify-center text-center min-h-screen pb-80 px-4 md:block md:p-0">
          <div class="fixed inset-0 transition-opacity" aria-hidden="true">
            <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
          </div>
          <span class="hidden sm:inline-block sm:align-middle md:h-screen" aria-hidden="true">&#8203;</span>
          <div class="w-5/6 inline-block align-bottom bg-white border-4 border-gray-50 rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle" role="dialog" aria-modal="true" aria-labelledby="modal-headline">
            <div class="px-5 py-5">
              <div class="">
                <h3 class="text-2xl font-medium leading-8 md:leading-6 pb-2 text-gray-700" id="modal-headlinemd">
                 Keyboard Shortcuts:
                </h3>
                <hr class="mb-5">
                <div id="" class="text-base text-gray-700" role="group">
                  <div class="markdown">
                    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 grid-flow-row text-black text-base leading-loose">
                      <div class=" pb-1"><code>?</code><span class="ml-2">toggle shortcut descriptions</span></div>
                      <div class=" pb-1"><code>/</code><span class="ml-2"> search</span></div>
                      <div class=" pb-1"><code>j</code><span class="ml-2"> scroll down</span></div>
                      <div class=" pb-1"><code>k</code><span class="ml-2"> scroll up</span></div>
                      <div class=" pb-1 -ml-2"><code>tt</code><span class="ml-2"> toggle dark theme</span></div>
                      <div class=" pb-1 -ml-2"><code>gi</code><span class="ml-2"> go to blog index page</span></div>
                      <div class=" pb-1 -ml-2"><code>gn</code><span class="ml-2"> go to next article</span></div>
                      <div class=" pb-1 -ml-2"><code>gp</code><span class="ml-2"> go to previous article</span></div>
                      <div class=" pb-1 -ml-2"><code>gf</code><span class="ml-2"> go forwards</span></div>
                      <div class=" pb-1 -ml-2"><code>gb</code><span class="ml-2"> go to previous page</span></div>
                      <div class=" pb-1 -ml-2"><code>gc</code><span class="ml-2"> go to categories page</span></div>
                      <div class=" pb-1 -ml-2"><code>go</code><span class="ml-2"> go to article's category page</span></div>
                      <div class=" pb-1 -ml-2"><code>ga</code><span class="ml-2"> go to about page</span></div>
                      <div class=" pb-1 -ml-2"><code>ge</code><span class="ml-2"> go to experience page</span></div>
                      <div class=" pb-1 -ml-2"><code>gr</code><span class="ml-2"> go to portfolio page</span></div>
                      <div class=" pb-1 -ml-2"><code>gk</code><span class="ml-2"> go to books page</span></div>
                      <div class=" pb-1 -ml-2"><code>gm</code><span class="ml-2"> go to analytics (metrics) page</span></div>
                      <div class=" pb-1 -ml-2"><code>gs</code><span class="ml-2"> go to snippets page</span></div>
                      <div class=" pb-1 -ml-2"><code>gl</code><span class="ml-2"> go to landing page</span></div>
                      <div class=" pb-1 -ml-2"><code>vt</code><span class="ml-2"> only show technical articles on blog index page</span></div>
                      <div class=" pb-1 -ml-2"><code>vn</code><span class="ml-2"> only show non-technical articles on blog index page</span></div>
                      <div class=" pb-1 -ml-2"><code>va</code><span class="ml-2"> show articles from all categories on blog index page</span></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="fuseModal" class="hidden fixed z-10 inset-0 overflow-y-auto">
        <div id="searchModalBackground" class="flex items-start justify-center text-center min-h-screen pb-80 px-4 md:block md:p-0">
          <div class="fixed inset-0 transition-opacity" aria-hidden="true">
            <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
          </div>
          <div class="absolute inset-x-0 w-screen px-3">
            <div class="w-full md:w-10/12 lg:w-8/12 mt-5 lg:mt-20 inline-block align-bottom bg-white border-4 border-gray-50 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle" role="dialog" aria-modal="true" aria-labelledby="modal-headline">
              <div class="py-1 px-1">
                <input style="outline:0;" type="text" class="mt-5 mb-3 px-3 mb-5 w-full text-gray-800 text-xl font-semibold border-2 border-gray-200 rounded-lg" id="searchBox">
                <div class="hidden lg:inline-flex flex">
                  <div class="width-12 mx-1 px-2 text-gray-500 border border-gray-300 rounded-lg">
                    /
                  </div>
                  or
                  <div id="macOrPc" class="width-12 mx-1 px-2 text-gray-500 border border-gray-300 rounded-lg">
                    cmd-K
                  </div>
                </div>
                <ul id="searchResults" class="results text-lg text-bold text-gray-600">
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="mx-auto w-full">
        <div class="flex flex-row">
          <div class="hidden xl:inline xl:w-32">
            <div class="w-32">
            <div class="mt-5 2xl:mt-20 fixed flex flex-col">
              <div class="lg:w-32">
                    <div>
                    <a class="my-2 prose prose-xl leading-8 text-gray-700 dark:text-gray-200 hover:underline font-semibold block md:inline-block" href="./index.html"><i class="far fa-md fa-star"></i></a>
                  </div>
                  <div>
                    <a class="text-lg my-2 text-gray-700 dark:text-gray-200 hover:underline font-semibold block md:inline-block" href="./blog.html">Blog</a>
                  </div>
                  <a class="text-lg my-2 text-gray-700 dark:text-gray-200 hover:underline font-semibold block md:inline-block" href="./snippets.html">Snippets</a>
                  <a class="text-lg my-2 text-gray-700 dark:text-gray-200 hover:underline font-semibold block md:inline-block" href="./about.html">About</a>
                  <a class="text-lg my-2 text-gray-700 dark:text-gray-200 hover:underline font-semibold block md:inline-block" href="./portfolio.html">Portfolio</a>
                  <a class="text-lg my-2 text-gray-700 dark:text-gray-200 hover:underline font-semibold block md:inline-block" href="./experience.html">Experience</a>
                  <a class="text-lg my-2 text-gray-700 dark:text-gray-200 hover:underline font-semibold block md:inline-block" href="./book-notes.html">Books</a>
                  <a class="text-lg my-2 text-gray-700 dark:text-gray-200 hover:underline font-semibold block md:inline-block" href="./analytics.html">Analytics</a>
                  <div id="searchButton" > <a class="text-lg my-2 text-gray-700 dark:text-gray-200 hover:underline font-semibold block md:inline-block" href="javaScript:;">Search</a> </div>
                <div class="flex my-2">
                  <button class="md:pl-0 my-2 theme-toggle" aria-label="themeToggle" id="modeSwitcher2">
                    <div  class="day modeIcon">
                      <i class="far fa-lightbulb fa-lg"></i>
                    </div>
                    <div class="night modeIcon hidden">
                      <i class="far fa-moon fa-lg"></i>
                    </div>
                  </button>
                </div>

  <div class="-mr-10 border-t-4 border-double border-gray-800 dark:border-gray-100 mt-20">
  </div>
  <div class="pt-20 font-serif text-lg text-gray-700 font-bold dark:text-gray-300">
    Published: <br> July 2017
  </div>
  <div class="pt-5 font-serif text-lg text-gray-700 font-bold dark:text-gray-300 w-36">
 Category: 
    <div>
            <a class="hover:underline" href="./category/technical/cryptocurrencies.html">Cryptocurrencies</a>
    </div>

  </div>
              </div>
            </div>
            </div>
          </div>
          <div id="contentParent" class="w-full xl:w-5/6 xl:ml-20">
  <div id="articleParent" class="mx-3 xl:ml-20 my-4  technical  ">

    <div class="mt-20 md:mt-40 lg:mt-20 xl:mt-8 2xl:mt-20">
      <div style="word-break: unset; white-space: wrap;"
           class="leading-tight text-left
                  font-serif
                  lg:-mr-30 xl:-mr-40
                  text-5xl md:text-6xl lg:text-8xl 2xl:text-9xl
                  font-semibold lg:font-normal
                  dark:text-gray-200
                  break-words md:break-all
                  ">
          Blockchains from the ground up: Part&nbsp;2
      </div>

      <div class="lg:hidden mt-10 md:mt-20 text-lg font-serif font-light text-gray-600 dark:text-gray-300">
        July 2017
      </div>
    </div>

    <div class="mt-10 lg:mt-20 2xl:mt-40 2xl:mb-10 border-b-0 border-gray-600 dark:border-gray-200 border-double">
    </div>

    <main class="lg:w-4/6">
      <article class="">
 <div class="markdown"> <p>An overview of the essential features of a blockchain, using proof-of-work for&nbsp;consensus</p> </div>         <div class="markdown">
          <h2 id="maintain-an-accurate-list-of-transactions-across-a-large-group-of-users-without-a-central-authority">Maintain an accurate list of transactions across a large group of users, without a central&nbsp;authority</h2>
<p>This is part 2 of an introduction to the key features of a generalised blockchain. <a href="./blockchain-introduction.html">Part 1</a> introduced key features of immutable record creation between 2 parties using public key cryptography. Part 2 explores how a network of users can maintain the same (true) list of transactions and protect each other against&nbsp;fraud. </p>
<h2 id="broadcasting-transactions-to-the-network">Broadcasting transactions to the&nbsp;network</h2>
<p>In  <a href="./blockchain-introduction.html">Part 1</a> we saw Lizzie, John and Chris exchanging coins. Lizzie also paid John with coins that were owed to her by Chris. These transactions were authenticated using <span class="caps">PKI</span>&nbsp;which:</p>
<ul>
<li>
<p>Ensured transaction&nbsp;integrity</p>
</li>
<li>
<p>Prevented participants claiming that they didn&rsquo;t make a past&nbsp;transaction</p>
</li>
<li>Prevents anyone creating a transaction on someone else&rsquo;s behalf without their&nbsp;consent. </li>
</ul>
<p>As the number of people in the network grows, the transfer of coins from one user to another becomes harder to track. If every users ledger is not identical then the opportunity arises to use coins that have already been spent to pay someone who doesn&rsquo;t know they&rsquo;ve already been&nbsp;used. </p>
<p>This is double spending, and is possible because the ledger that is shared amongst all members of the group only has <em>weak consistency</em> - it is not necessarily correct all the time in all&nbsp;locations. </p>
<h3>Weak&nbsp;Consistency</h3>
<p>Weak consistency could be solved by requiring that everyone votes to accept a transaction before it is accepted into the ledger (Unanimous consensus), or to save time we could reduce the requirements so that only 50% of all users validate a transaction before it is accepted into the ledger (Quorum consensus). Either of these solutions is possible for a small local group with a list of all&nbsp;users. </p>
<p>However Unanimous or Quorum Consensus doesn&rsquo;t solve the weak consistency problem&nbsp;if:</p>
<ol>
<li>The group is&nbsp;large</li>
<li>The group is small but spread across different locations or&nbsp;timezones</li>
<li>It is not possible to know how many members there are and therefore what proportion of users are&nbsp;participating.</li>
<li>The <em>real</em> identity of a user is&nbsp;unknown</li>
</ol>
<p>In these cases a peer-to-peer network is required where transactions between users require approval by other users before being confirmed. This has not been trivial to solve, as some users would be incentivised to be dishonest, and some may make mistakes. This is the distributed consensus problem, which on <a href="https://en.wikipedia.org/wiki/Consensus_(computer_science)">wikipedia</a> is defined&nbsp;as: </p>
<blockquote>
<p>The consensus problem requires agreement among a number of agents for a single data value. Some of the processes (agents) may fail or be unreliable in other ways, so consensus protocols must be fault tolerant or resilient. The processes must somehow put forth their candidate values, communicate with one another, and agree on a single consensus&nbsp;value.</p>
</blockquote>
<h2 id="distributed-consensus">Distributed&nbsp;Consensus</h2>
<p>When the number and identity of participants is known, distributed consensus is possible. Two types of protocol which allows all users in a distributed system to agree on a transaction are the <a href="https://en.wikipedia.org/wiki/Paxos_(computer_science)">Paxos</a> family of protocols and the <a href="http://courses.cs.vt.edu/~cs5204/fall00/distributedDBMS/duckett/tpcp.html">Two-phase commit</a> protocol. Both of these would require that at least 50% of all users reach agreement in order to add a new&nbsp;transaction. </p>
<p>However in a public peer-to-peer network the total number of active users is not known - its  fast and cheap to create new user profiles, and existing user profiles may become dormant. This makes it impossible to know how many users 50% would be. Additionally, because its possible to cheaply create new user profiles (just generate a new public-private key pair), a single actor could generate and control many user accounts in order to have many votes and force incorrect transactions onto the ledger. An attack where one user subverts a network by creating many profiles is known as a <a href="https://en.wikipedia.org/wiki/Sybil_attack">Sybil attack</a>.</p>
<h3>Proof of&nbsp;Work</h3>
<p>The solution to the Sybil attack is to increase the cost of verifying a transaction such that the cost exceeds the reward. This is achieved through proof-of-work (PoW) algorithms, which are computationally expensive for a sender claiming to have verified a transaction, and computationally simple for the receiver to verify that the sender has validated the&nbsp;transaction.</p>
<p>One possible Proof of Work approach is to require that the hash of a verification message begins with a certain set of characters. The chosen set of characters is called a <em>nonce</em> and the only way to create a verification message with an acceptable hash is to try many slightly different messages. For example, a nonce may be 3 zeros. It&rsquo;s arbitrary, but the longer the nonce is the more difficult it becomes to find a hash that fits the&nbsp;requirements. </p>
<p>This is because a hash is a random list of characters, and altering even a single part of the data being hashed will result in a completely different hash value. Therefore there is no way to predict a hash value. The only way to generate a hash with the required none is to  repeatedly alter the data being hashed (even by just one character) until a hash with the required features is randomly achieved. This is computationally expensive to achieve, but computationally simple to&nbsp;verify. </p>
<p>Using the method, a user who seeks to verify a transaction and broadcast the result must (once they&rsquo;ve verified the transactions) repeatedly try different messages until they randomly find a message that meets the nonce requirements. It is simple for a user to check if a transaction verification message meets the nonce requirements, because it is simple to inspect a hash and compare it to the&nbsp;nonce.</p>
<p>The effect of this requirement is a process that makes it expensive to claim that a transaction has been verified and cheap to check that verification claim. This removes the threat of a Sybil attack, but does not remove the distributed consensus problems created by not&nbsp;knowing:</p>
<ol>
<li>The true identity of users in the&nbsp;network</li>
<li>How many users&nbsp;exist</li>
</ol>
<p>This problem cannot be completely solved, and the practical solution is to relax the requirements such that the probability of accepting a fraudulent transaction is lower than some user defined threshold. This is acceptable because a user would require a higher degree of confirmation for a high-value transaction than they would for a low-value transaction, and would therefore be willing to incur more time and cost to verify a high value transaction and reduce the probability of accepting an incorrect transaction below a&nbsp;threshold. </p>
<p>If a user wishes to make fast or low-value transactions, or trusts the party they&rsquo;re transacting with, then they may accept a transaction without any other users on the network verifying that the sender has the required funds&nbsp;available.</p>
<p>However when the senders trustworthiness is not assured, verification is required. The more risky or valuable the transaction, the more users the receiver of the funds will ask to verify that the sender has access to the required funds. The higher the number of users, the higher the probability that a dishonest transaction will be identified before being&nbsp;accepted.</p>
<p>An appropriate level of verification will depend on the amount being transferred and how well the receiver of the funds knows the&nbsp;sender. </p>
<h2 id="transaction-fees">Transaction&nbsp;fees</h2>
<p>Asking peers on the network to verify transactions introduces a new problem. Verifying a transaction requires time and effort, and incurs a cost. This cost requires that network participants be rewarded for correctly verifying transactions between other&nbsp;participants. </p>
<p>An attacker would only attack if the cost is less than the reward. Therefore the number and cost of verifications required should be just enough to make the cost of an attack more than the value of the&nbsp;transaction.</p>
<p>This introduces the problem that it costs more to verify a transaction than the value of the transaction itself. It is also create the recursive problem where the users who verified the first transaction would need to verify that the payment they received was then also valid. Furthermore, a high proportion of the original transaction value is spent as a transaction fee (for verification) which is not&nbsp;efficient.</p>
<p>These problems are avoided by combining multiple transactions and verifying them at the same time, broadcasting the successful verification of multiple transactions simultaneously by grouping the transactions together into a block of&nbsp;transactions. </p>
<p>By confirming multiple transactions at once (and proving it using proof-of-work), transaction fees can be aggregated (allowing each individual fee to be much lower). Each block includes a list of verified transactions, a reference to the previous block, and a block <span class="caps">ID</span>.</p>
<h2 id="incentivised-social-responsibility">Incentivised social&nbsp;responsibility</h2>
<p>The transaction verification process outlined above is remarkable because it creates a demand for new participants to the network by creating a financial incentive to verify transactions. This makes the network more secure as increasing the number of participants makes a sybil attack more&nbsp;difficult. </p>
<h2 id="summary">Summary</h2>
<ol>
<li>
<p>Users generate new transactions and broadcast them on a peer-to-peer network for&nbsp;verification</p>
</li>
<li>
<p>An idle user listens for new transactions and collects them until the sum of all transactions&rsquo; verification fees is greater than the cost the user will incur to verify them and meet the proof-of-work&nbsp;requirements</p>
</li>
<li>
<p>The idle user adds an extra transaction to their list of transactions that transfers the sum of the transaction fees to their own&nbsp;address.</p>
</li>
<li>
<p>The idle user generates the block of newly verified transactions, referencing the previously verified block so that transactions can be chronologically ordered and completing the proof-of-work challenge. This new block is then broadcast to the&nbsp;network.</p>
</li>
<li>
<p>Other users are listening for new block announcements. These users verify that the block is valid according to the proof-of-work requirements and the order of the&nbsp;blocks.</p>
</li>
<li>
<p>Users with unverified transactions look inside the verified block to see if their pending transactions have been&nbsp;accepted.</p>
</li>
</ol>
<h2 id="competing-to-validate-blocks-of-transactions">Competing to validate blocks of&nbsp;transactions</h2>
<p>Each user can choose which transactions they verify, and how many to verify before beginning the proof-of-work requirement and hopefully collecting the transaction fees. This lack of order around transaction verification is fine because the only way to increase the probability of being the first to claim the transaction fees associated with a collection of transactions (a block) is to spend more <span class="caps">CPU</span> power searching for the required partial hash&nbsp;collision. </p>
<p>If two users complete a block at approximately the same time then the blockchain will look different in different parts of the network, as each completed block begins to propagate and other users accept the new block and add it to their ledger. This is ok if a rule is enforced that requires a user to always accept the longest chain of&nbsp;blocks. </p>
<p>This works because if multiple blocks are created at the same time, the time it takes to create subsequent blocks will vary due to the random behaviour of the proof-of-work algorithm. Therefore chains of different length will always exist and one version of the block chain will be longer than the others, providing a clear candidate for which branch of the blockchain to use. If there are transactions in the discarded branch which are not present in the new (longest) blockchain then they are added back into the pool of transactions awaiting&nbsp;verification. </p>
<h2 id="a-block-of-transactions-in-never-absolutely-immutable">A block of transactions in never absolutely&nbsp;immutable</h2>
<p>The above procedure for verifying transactions and adding new blocks onto the chain means that even if a user inspects a new block and sees that their transaction has been verified, its possible that in the future a longer chain will be discovered (which must be accepted) which doesn&rsquo;t include their&nbsp;transaction. </p>
<p>Therefore any block could potentially be removed, which means a transaction is never completely verified. However the probability of a block being removed decreases as the number of blocks after it increases. This means verification can be thought of in terms of the number of blocks that have been added to the chain <em>after</em> the block containing the&nbsp;transaction. </p>
<p>If you are willing to accept a high level of risk, or you trust the party you are transacting with you could opt for a small number of blocks to be added after the block containing your transaction. This has the benefit of increasing the speed of the transaction verification. If the transaction is risky or high-value, you might require a larger number of blocks to be added to the chain before accepting the transaction. This will increase the time required to verify the transaction, but reduce the probability that a longer chain will undo the block containing the transaction in&nbsp;question. </p>
        </div>
      </article>
    </main>

    <div class="mt-20 mb-10 text-lg dark:text-gray-200">
        <div class="flex flex-row">
          <div class="text-red-500 dark:text-red-500"> &#x2190;  </div>
          <a id="previousArticleInCategory" class="font-serif text-lg font-extrabold dark:text-gray-300 px-1 hover:text-red-500 dark:hover:text-red-500" href="./pelican2.html"> Blogging with Pelican: Design, Plugins,&nbsp;Sharing</a>
        </div>

        <div class="flex flex-row mt-2">
          <div class="text-green-500 dark:text-green-200"> &#x2192; </div>
          <a id="nextArticleInCategory" class="font-serif text-lg font-extrabold dark:text-gray-300 text-left px-1 hover:text-green-500 dark:hover:text-green-200" href="./ethereum-parity-multisig-wallet.html"> Create a Multi-Signature Ethereum wallet using&nbsp;Parity</a>
        </div>

      <div class="hidden mt-2 flex flex-row font-serif text-lg text-gray-700 font-bold dark:text-gray-300">
        Other articles in:
          <a id="otherArticlesInCategory" class="hover:underline ml-1 text-gray-600 dark:text-gray-300 font-serif text-lg font-bold " href="./category/technical/cryptocurrencies.html"> Cryptocurrencies</a>
          
      </div>
    </div>



  </div>

          </div>
        </div>
      </div>
    </main>

    <footer class="footer w-5/6 mx-auto border-t-2 border-single border-gray-200 mt-10 py-3">
      <div class="text-center font-serif text-lg text-gray-700 dark:text-gray-200">
        <a class="px-3" href="#top">Back to top</a> |
        <a class="px-3" href="./blog.html">Blog Posts</a> |
        <a class="px-3" href="./categories.html">Categories</a> |
        <a class="px-3" href="./feeds/all.atom.xml">RSS</a> |
        <a class="px-3" href="JavaScript:void(0)" id="viewShortcuts">Shortcuts</a> |
        <a class="px-3" href="https://twitter.com/johnmathews">Twitter</a> 
      </div>
    </footer>

        <script>
        const light = "./theme/css/pygment-light.css"
        const dark = "./theme/css/pygment-dark.css"
        const indexURL = 'http://localhost:8000/fuse.html'
        const siteURL = '.'

        // show category options window when cat icon is clicked
        $( ".catChooser" ).click(function() {
              $('#catModal').removeClass('hidden');
        });


      </script>

      <script rel="prefetch" type="module" src="./theme/js/categoryChooser.js" crossorigin="anonymous"></script>
      <script rel="prefetch" type="text/javascript" src="./theme/js/navbar.js" crossorigin="anonymous"></script>
      <script rel="prefetch" type="module" src="./theme/js/fuseSearch.js" crossorigin="anonymous"></script>
      <script rel="prefetch" type="module" src="./theme/js/keyboard-shortcuts.js" crossorigin="anonymous"></script>
      <script rel="prefetch" type="module" src="./theme/js/themeChooser.js" crossorigin="anonymous"></script>

      <script>
        // toggle cat modal view
        $( "#catModal" ).click(function() {
                  console.log('flag1')
                  $('#catModal').addClass('hidden');
                });
      </script>
      <script>
        if (navigator.userAgent.indexOf('Mac OS X') != -1) {
          $("#macOrPc").html("&#8984;K");
        } else {
          $("#macOrPc").html("Cmd-K");
        }
      </script>




  <script>
    const technical = $( "#articleParent" ).hasClass('technical');
    const nonTechnical = $( "#articleParent" ).hasClass('nonTechnical');

    // if user preference for article category has been set and is contradicted by currenct article, update it
    if (localStorage.getItem('categoryChoice') === "technical") {
      if (nonTechnical) {
        window.localStorage.setItem('categoryChoice', 'all');
      };
    } else if (localStorage.getItem('categoryChoice') === "nonTechnical") {
      if (technical) {
        window.localStorage.setItem('categoryChoice', 'all');
      };
    } else if (localStorage.getItem('categoryChoice') === "all") {
      // do nothing
    } else {
      // if user preference for article category hasn't been set, assign it using article type
      if (technical) {
        window.localStorage.setItem('categoryChoice', 'technical');
      } else if (nonTechnical) {
        window.localStorage.setItem('categoryChoice', 'nonTechnical');
      };
    }
  </script>
  </body>

</html>